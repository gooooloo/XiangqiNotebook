# 测试规则

**关键要求：每次代码修改都必须通过单元测试验证后才能视为完成。**

## 每次代码修改后
- 运行完整测试套件
- 至少运行与修改组件相关的测试
- 未运行测试的情况下绝不能标记任务完成

## 测试执行要求
- 所有测试必须通过才能视为修改完成
- 如果有测试失败：
  - 分析失败原因，定位根本问题
  - 修复代码（或修复测试本身的问题）
  - 重新运行测试直到全部通过
  - 测试未通过前不得继续其他任务

## 何时运行测试
- 修改 Model 层代码后（DatabaseData、SessionData、FenObject、Move 等）
- 修改业务逻辑后（Database、SessionManager、GameOperations、MoveRules）
- 重构核心功能后
- 提交代码前
- 用户明确要求测试时

## 测试范围指南
- **推荐**: 运行完整测试套件以发现集成问题
- **最低要求**: 运行与修改的类/组件相关的测试

## 测试结果汇报
- 始终告知用户测试执行情况和结果
- 如果测试失败，说明失败原因和修复措施
- 如果测试通过，确认代码修改已验证

## 测试执行策略
- 每次代码修改后都必须运行测试
- 所有测试必须通过后代码修改才算完成
- 测试失败必须立即修复，然后才能继续
